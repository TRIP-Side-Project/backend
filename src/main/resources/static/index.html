<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<input type="text" id="accessToken">
<button onclick="connect(accessToken.value)">connect</button>
<hr>
<input type="text" id="message">
<button onclick="sendToAll(accessToken.value, message.value)">send-to-all</button>
</body>
<script src="src/eventsource.js"></script>
<script type="text/javascript">
    function connect(accessToken) {
        const sse = new EventSourcePolyfill('http://localhost:8080/api/notifications/connect', {
                headers: {
                    accessToken: accessToken
                }
            }
        );

        sse.addEventListener('connect', event => {
            console.log('connect: ', event.data);
        });

        sse.addEventListener('send-to-all', event => {
            console.log(event.data);
        });
    }

    function sendToAll(accessToken, message) {
        fetch('http://localhost:8080/api/notifications/send-to-all?message=' + message, {
                headers: {
                    accessToken: 'Bearer ' + accessToken
                }
            })
            .catch(error => console.log('error: ', error));
    }
</script>
</html>
